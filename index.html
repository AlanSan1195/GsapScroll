<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Airpod Pro | GSAP scroll</title>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
  </head>

  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: system-ui;
      height: 4000px;
      margin: 0;
      overflow-x: hidden;
      display: flex;
      width: screen;
      flex-direction: column;
    }

    h1 {
      position: fixed;
      left: 50%;
      top: 40%;
      transform: translate(-50%, -50%);
      font-size: 10vw;
      text-wrap: nowrap;
      text-align: center;
      opacity: 0;
    }
    a {
      color: #fff;
      text-decoration: none;
      font-size: 12px;
      font-weight: 200;
      opacity: 0.8;
      font-family: system-ui, -apple-system;
    }
    p {
      font-size: 22px;
      font-weight: 600;
      width: 300px;
      color: #808080;
    }
    canvas {
      position: fixed;

      left: 50%;
      top: 30%;
      transform: translate(-50%, -50%);
      width: 85%;
      aspect-ratio: 1068/600;
    }
    #container {
      position: fixed;
      left: 0;
      top: 0;
      display: flex;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none;
    }
    .cont-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 110px;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 20;
      backdrop-filter: blur(20px);
      mix-blend-mode: difference;
      border-bottom: 1px solid hsla(0, 0%, 38%, 0.613);
    }
    header {
      width: 900px;
      display: flex;
      flex-direction: column;
      text-wrap: nowrap;
      gap: 10px;
      margin: auto;
      padding: 4px;
    }
    .access {
      display: flex;
      justify-content: space-between;
      color: #fff;
      font-size: 25px;
      margin-top: 10px;
      text-wrap: nowrap;
      align-items: center;
      gap: 20px;
    }
    .logo-appel {
      margin-right: 10px;
      color: #fff;
      margin: 0px 10px;
    }
    .title-element {
      color: #fff;
      font-size: 9px;
      font-weight: 600;
      font-size: 25px;
    }
    .mantra-subtitle {
      position: fixed;
      left: 50%;
      top: 50%;
      width: 400px;
      font-size: 55px;
      text-align: center;
      opacity: 0;
      font-weight: 600;
      color: #fff;
      text-wrap: wrap;
    }

    button {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #3e62ff;
      cursor: pointer;
      border: none;
      height: 20px;
      width: full;
      border-radius: 20px;
      padding: px 1px;
      font-size: 25px;
      color: #fff;
    }
    section {
      position: fixed;
      top: 25%;
      width: 100%;
    }
    #procesador-description {
      position: fixed;
      flex-direction: column;

      left: 0;
      height: 100%;
      width: 100%;
      top: 780px;
    }

    .grid {
      display: grid;
      position: fixed;
      align-items: center;
      justify-content: center;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr;
      width: 100%;
      border: #808080 0.4px solid;
      scale: 0.9;
      z-index: 30;
      background-color: #000;
    }

    video {
      display: flex;
      justify-content: center;
      align-items: center;
      grid-column: 1;
      height: 500px;
      width: 100%;
      font-weight: 600;
      color: #808080;
      border-right: #808080 0.3px solid;
    }
    .description-procesador {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 25px;
      width: 100%;
      font-weight: 100;
    }

    #content-description {
      position: absolute;
      display: flex;
      justify-content: space-between;
      top: 95%;
      width: 100%;
      height: 100%;
      z-index: 90;
    }
    .description {
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;

      margin: 0px 180px;
      padding: 0px 15px;
      text-wrap: pretty;
    }

    #airpod-inside-1 {
      display: flex;
      position: absolute;
      top: 85%;
      right: 0;
      left: 0;
      z-index: 99;
    }
    #airpod-inside-2 {
      display: flex;
      position: absolute;
      top: 85%;
      right: 0;
      left: 0;
      opacity: 0;
      z-index: 90;
    }
    .airpod-size {
      margin: auto;
    }

    #p-description {
      display: flex;
      flex-direction: column;
      opacity: 1;
      width: 250px;
      padding: 0px 15px;
      background-color: #03ae28;
    }
    #text-1 {
      opacity: 0;
    }
    #text-2 {
      opacity: 0;
    }
    #text-3 {
      opacity: 0;
    }
    #p-description-2 {
      display: flex;
      opacity: 1;
      align-items: center;
      justify-content: center;
      width: 250px;
      padding: 0px 15px;
    }
    span {
      color: #fff;
    }
    .special-span {
      color: #03ae28;
    }
    .description-text {
      font-size: 17px;
      font-weight: 600;
      color: #808080;
    }
  </style>

  <body>
    <div class="cont-header">
      <header>
        <div class="access">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            viewBox="0 0 14 18"
          >
            <path
              d="M4.02,16.23c-.25-.16-.51-.39-.77-.71-.18-.21-.4-.51-.66-.9-.45-.65-.82-1.4-1.1-2.25-.31-.93-.46-1.82-.46-2.69,0-.97,.21-1.82,.62-2.53,.32-.57,.75-1.02,1.3-1.35,.55-.34,1.13-.51,1.76-.52,.22,0,.45,.03,.7,.09,.18,.05,.4,.13,.66,.23,.34,.13,.53,.21,.59,.23,.2,.07,.37,.1,.5,.1,.1,0,.24-.03,.4-.08,.09-.03,.26-.09,.5-.19,.24-.09,.43-.16,.58-.22,.23-.07,.45-.13,.65-.16,.24-.04,.48-.05,.71-.03,.44,.03,.84,.12,1.2,.26,.63,.25,1.14,.65,1.52,1.21-.16,.1-.31,.21-.45,.34-.31,.28-.57,.59-.76,.93-.27,.48-.4,1.01-.4,1.56,.01,.67,.18,1.26,.52,1.77,.24,.37,.56,.69,.95,.95,.19,.13,.36,.22,.52,.28-.08,.26-.17,.49-.25,.68-.22,.52-.48,.99-.77,1.43-.27,.39-.48,.68-.64,.87-.25,.3-.49,.52-.73,.68-.28,.18-.58,.27-.9,.27-.22,.01-.43-.02-.64-.08-.12-.04-.3-.1-.53-.2-.23-.1-.42-.17-.56-.21-.23-.06-.47-.09-.72-.09s-.49,.03-.72,.09c-.16,.04-.34,.11-.56,.2-.26,.11-.43,.18-.53,.21-.2,.06-.41,.1-.61,.11-.32,0-.62-.09-.92-.28ZM8.26,4.81c-.42,.21-.82,.3-1.22,.27-.06-.4,0-.81,.17-1.26,.15-.38,.35-.73,.62-1.04,.27-.31,.6-.57,1.01-.78,.41-.21,.8-.32,1.17-.34,.05,.42,0,.84-.15,1.28-.14,.4-.35,.76-.62,1.09-.27,.33-.6,.59-.98,.78Z"
              fill="currentcolor"
            />
          </svg>
          <a href="">Tienda</a>
          <a href="">Mac</a>
          <a href="">iPad</a>
          <a href="">iPhone</a>
          <a href="">Watch</a>
          <a href="">AirPods</a>
          <a href="">TV y Casa</a>
          <a href="">Enrtetenimiento</a>
          <a href="">Accesorios</a>
        </div>
        <div class="access">
          <div>
            <a class="title-element" href="">Airpods Pro 2</a>
          </div>
          <div class="access">
            <a href="">Descripción</a>
            <a href="">Especificaciones</a>
            <a href="">Comprar</a>
            <button href="">
              <a href="">Comprar</a>
            </button>
          </div>
        </div>
      </header>
    </div>

    <div id="container">
      <h1 id="title" class="">AirPods Pro</h1>
      <canvas id="canvas"></canvas>
      <h1 id="mantra" class="mantra-subtitle">Una experiencia resonante.</h1>
      <div id="procesador-description">
        <div class="grid">
          <div>
            <video
              autoplay
              muted
              aria-label="El nuevo chip H2"
              width="500px"
              heigth="500px"
              src="/media/H2procesador.mp4"
            ></video>
          </div>
          <div class="description-procesador">
            <p>
              <span>El chip H2 </span>trae más funcionalidades que nunca, y usa
              <span>algoritmos</span>algoritmos para lograr una cancelación de
              ruido más inteligente, un sonido tridimensional superior y una
              mayor duración de la batería. Justo lo que querías escuchar.
            </p>
          </div>
        </div>
        <div id="content-description">
          <div class="description">
            <p id="text-1" class="description-text">
              Gracias a la potencia de los
              <span>algoritmos de adaptación, </span> el chip procesa el sonido
              más rápido y ajusta el audio en el preciso momento en que lo
              escuchas. Cada detalle se adapta a la forma específica de tu
              oreja, para que disfrutes un
              <span class="special-span">sonido de aún más alta fidelidad</span
              >.
            </p>
            <p id="text-2" class="description-text">
              <span>Los micrófonos orientados hacia adentro</span> funcionan con
              algoritmos avanzados que reconocen y articulan mejor tu voz para
              que
              <span class="special-span"> todo suene mucho más natural</span> en
              llamadas telefónicas y videollamadas.
            </p>
          </div>

          <div id="text-3" class="description">
            <p class="description-text">
              <span
                >El controlador y el amplificador especialmente desarrollados </span
              >usan el chip H2 para reducir la distorsión durante la
              reproducción.
              <span class="special-span">
                Los graves sonarán más profundos y los agudos mucho más nítidos
              </span>
              a cualquier volumen.
            </p>
          </div>
        </div>
        <img
          id="airpod-inside-1"
          src="https://www.apple.com/v/airpods-pro/m/images/overview/audio_airpod_guts_top__d2is2iiz9l6q_small_2x.jpg"
          alt=" Estructura interna del Airpod Pro"
          class="airpod-size"
          width="350px"
        />
        <img
          id="airpod-inside-2"
          src="https://www.apple.com/v/airpods-pro/m/images/overview/audio_airpod_guts_bottom__bfet1uy1eg0y_small_2x.jpg"
          alt=" Estructura interna del Airpod Pro"
          class="airpod-size"
          width="350px"
        />
      </div>
    </div>
  </body>

  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>

  <script>
    gsap.registerPlugin(SplitText);
    gsap.registerPlugin(ScrollTrigger);
    const tl = gsap.timeline({
      scrollTrigger: {
        duration: 1,
        scrub: 1,
      },
    });
    gsap.to(
      "#title",
      {
        opacity: 1,
        duration: 1,
        ease: "power2.out",
      },
      "0.6"
    );

    gsap.to("#canvas", {
      y: 20,
    });
    gsap.to(
      "#container",
      {
        // scale: 1.2,
        ease: "power2.out",
      },
      "0.7"
    );

    tl.to(
      "#title",
      {
        autoAlpha: 0,
        scale: 1.5,
        ease: "power2.out",
        duration: 20,
      },
      "<"
    );
    tl.to(
      ".cont-header",
      {
        y: -45,
        ease: "power2.out",
        duration: 10,
      },
      "<"
    );

    tl.to(
      "#mantra",
      {
        opacity: 1,
        scale: 1.5,
        duration: 20,
        ease: "power2.out",
      },
      ">850"
    );
    tl.to(
      "#mantra",
      {
        scale: 1.8,
        opacity: 0,
        ease: "power2.out",
        duration: 100,
      },
      ">850"
    );
    tl.to(
      "#procesador-description",
      {
        y: -1260,
        ease: "sine.inOut",
        duration: 600,
      },
      ">600"
    );

    const TOTAL_FRAMES = 65;
    const canvas = document.querySelector("canvas");
    const ctx = canvas.getContext("2d");

    canvas.height = 600;
    canvas.width = 1068;

    const creteUrl = (frame) => {
      const id = frame.toString().padStart(4, "0");
      return `https://www.apple.com/105/media/us/airpods-pro/2022/d2deeb8e-83eb-48ea-9721-f567cf0fffa8/anim/hero/medium/${id}.png`;
    };

    const imagenes = Array.from({ length: TOTAL_FRAMES }, (_, i) => {
      let img = new Image();
      img.src = creteUrl(i);
      return img;
    });

    const airpods = {
      frame: 0,
    };

    gsap.to(airpods, {
      frame: TOTAL_FRAMES - 1,
      ease: "power2.out",
      snap: "frame",
      scrollTrigger: {
        scrub: 0.1,
      },
      onUpdate: render,
    });
    imagenes[0].onload = () => render();

    function render() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(imagenes[airpods.frame], 0, 0);
    }

    tl.to(
      "#text-1",
      {
        opacity: 1,
        y: -200,
        ease: "sine.out",
        duration: 300,
      },
      ">"
    );

    tl.to(
      "#text-1",
      {
        opacity: 0,
        y: -300,
        ease: "sine.out",
        duration: 400,
      },
      ">"
    );
    tl.to(
      "#airpod-inside-1",
      {
        scale: 0.9,
        opacity: 0,
        ease: "sine.out",
        duration: 300,
      },
      "<"
    );
   
    // tl.to(
    //   "#text-2",
    //   {
    //     opacity: 1,
    //     y: -300,
    //     ease: "sine.out",
    //     duration: 700,
    //   },
    //   "<"
    // );
    //  tl.to(
    //   "#airpod-inside-2",
    //   {

    //     opacity: 1,
    //     ease: "sine.out",
    //     duration: 600,

    //   },
    //   ">"
    // );

  </script>
</html>
