<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Airpod Pro | GSAP scroll</title>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
  </head>

  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: system-ui;
      height: 5000px;
      margin: 0;
      overflow-x: hidden;
      display: flex;
      width: screen;
      flex-direction: column;
    }

    h1 {
      position: fixed;
      left: 50%;
      top: 40%;
      transform: translate(-50%, -50%);
      font-size: 10vw;
      text-wrap: nowrap;
      text-align: center;
      opacity: 0;
    }

    canvas {
      position: fixed;
      left: 50%;
      top: 30%;
      transform: translate(-50%, -50%);
      width: 80%;
      aspect-ratio: 1068/600;
    }
    #container {
      position: fixed;
      left: 0;
      top: 0;
      display: flex;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none;
    }
    .cont-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 45px;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 20;
    }
    header {
      position: absolute;
      inset: 0;
      top: 5px;
      width: 330px;
      border-bottom: 0.5px solid #606060b2;

      display: flex;
      flex-direction: column;
      text-wrap: nowrap;
      gap: 6px;
      margin: auto;

      padding: 4px;
    }
    .access {
      display: flex;
      justify-content: space-between;
      color: #fff;
    }

    .logo-appel {
      width: 20px;
      height: 20px;
      margin-right: 10px;
      color: #fff;
      margin: 0px 10px;
    }
    .title-element {
      color: #fff;
      font-size: 9px;
      font-weight: 600;
    }
    a {
      color: #fff;
      text-decoration: none;
      font-size: 4px;
      font-weight: 200;
    }
    button {
      background: #3e62ff;
      cursor: pointer;
      border: none;
      height: 10px;
      width: 30px;
      border-radius: 20px;
      padding: px 1px;
      font-size: 5px;
      color: #fff;
    }
  </style>

  <body>
    <div class="cont-header">
      <header>
        <div class="access">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="8"
            height="8"
            viewBox="0 0 14 18"
          >
            <path
              d="M4.02,16.23c-.25-.16-.51-.39-.77-.71-.18-.21-.4-.51-.66-.9-.45-.65-.82-1.4-1.1-2.25-.31-.93-.46-1.82-.46-2.69,0-.97,.21-1.82,.62-2.53,.32-.57,.75-1.02,1.3-1.35,.55-.34,1.13-.51,1.76-.52,.22,0,.45,.03,.7,.09,.18,.05,.4,.13,.66,.23,.34,.13,.53,.21,.59,.23,.2,.07,.37,.1,.5,.1,.1,0,.24-.03,.4-.08,.09-.03,.26-.09,.5-.19,.24-.09,.43-.16,.58-.22,.23-.07,.45-.13,.65-.16,.24-.04,.48-.05,.71-.03,.44,.03,.84,.12,1.2,.26,.63,.25,1.14,.65,1.52,1.21-.16,.1-.31,.21-.45,.34-.31,.28-.57,.59-.76,.93-.27,.48-.4,1.01-.4,1.56,.01,.67,.18,1.26,.52,1.77,.24,.37,.56,.69,.95,.95,.19,.13,.36,.22,.52,.28-.08,.26-.17,.49-.25,.68-.22,.52-.48,.99-.77,1.43-.27,.39-.48,.68-.64,.87-.25,.3-.49,.52-.73,.68-.28,.18-.58,.27-.9,.27-.22,.01-.43-.02-.64-.08-.12-.04-.3-.1-.53-.2-.23-.1-.42-.17-.56-.21-.23-.06-.47-.09-.72-.09s-.49,.03-.72,.09c-.16,.04-.34,.11-.56,.2-.26,.11-.43,.18-.53,.21-.2,.06-.41,.1-.61,.11-.32,0-.62-.09-.92-.28ZM8.26,4.81c-.42,.21-.82,.3-1.22,.27-.06-.4,0-.81,.17-1.26,.15-.38,.35-.73,.62-1.04,.27-.31,.6-.57,1.01-.78,.41-.21,.8-.32,1.17-.34,.05,.42,0,.84-.15,1.28-.14,.4-.35,.76-.62,1.09-.27,.33-.6,.59-.98,.78Z"
              fill="currentcolor"
            />
          </svg>
          <a href="">Tienda</a>
          <a href="">Mac</a>
          <a href="">iPad</a>
          <a href="">iPhone</a>
          <a href="">Watch</a>
          <a href="">AirPods</a>
          <a href="">TV y Casa</a>
          <a href="">Enrtetenimiento</a>
          <a href="">Accesorios</a>
        </div>
        <div class="access">
          <div>
            <a class="title-element" href="">Airpods Pro 2</a>
          </div>
          <div>
            <a href="">Descripci√≥n</a>
            <a href="">Especificaciones</a>
            <a href="">Comprar</a>
            <button href="">
              <a href="">Comprar</a>
            </button>
          </div>
        </div>
      </header>
    </div>

    <div id="container">
      <h1 id="title" class="">AirPods Pro</h1>
      <canvas id="canvas"></canvas>
    </div>
  </body>

  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>

  <script>
    gsap.registerPlugin(SplitText);
    gsap.registerPlugin(ScrollTrigger);
    const tl = gsap.timeline({
      scrollTrigger: {
        duration: 1,
        scrub: 1,
      },
    });
    gsap.to(
      "#title",
      {
        opacity: 1,

        duration: 1,
        ease: "power2.out",
      },
      "0.6"
    );

    gsap.to("#canvas", {
      y: 20,
    });
    gsap.to(
      "#container",
      {
        scale: 1.2,
        ease: "power2.out",
      },
      "0.7"
    );
    tl.to(
      "#title",
      {
        autoAlpha: 0,
        scale: 1.5,
        ease: "power2.out",
      },
      "<"
    ),
    tl.to(
        ".cont-header",
        {
          y: -20,
          ease: "power2.out",
          duration: 0.1,
          backdropFilter: "blur(500px)",
          borderBottom: "0.5px solid #606060b2",
        },"<"
        
      ),
    tl.to("header", {
      borderBottom: "0",
      duration: 0.1,

    })
      

    const TOTAL_FRAMES = 65;
    const canvas = document.querySelector("canvas");
    const ctx = canvas.getContext("2d");

    canvas.height = 600;
    canvas.width = 1068;

    const creteUrl = (frame) => {
      const id = frame.toString().padStart(4, "0");
      return `https://www.apple.com/105/media/us/airpods-pro/2022/d2deeb8e-83eb-48ea-9721-f567cf0fffa8/anim/hero/medium/${id}.png`;
    };

    const imagenes = Array.from({ length: TOTAL_FRAMES }, (_, i) => {
      let img = new Image();
      img.src = creteUrl(i);
      return img;
    });

    const airpods = {
      frame: 0,
    };

    gsap.to(airpods, {
      frame: TOTAL_FRAMES - 1,
      ease: "none",
      snap: "frame",
      scrollTrigger: {
        scrub: 0.2,
      },
      onUpdate: render,
    });
    imagenes[0].onload = () => render();

    function render() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(imagenes[airpods.frame], 0, 0);
    }
  </script>
</html>
